<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Golden Coin App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://sad.adsgram.ai/js/sad.min.js"></script>
    <style>
        html, body { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; font-family: sans-serif; }
        body { touch-action: none; user-select: none; }
        .score-display { font-size: 50px; position: absolute; color: yellow; animation: fadeOut 1s forwards; pointer-events: none; }
        @keyframes fadeOut { to { opacity: 0; transform: translateY(-30px); } }
        #snackbar { visibility: hidden; min-width: 250px; margin-left: -125px; background-color: #1e293b; color: #fff; text-align: center; border-radius: 24px; padding: 12px; position: fixed; z-index: 1000; left: 50%; bottom: 80px; }
        #snackbar.show { visibility: visible; animation: fadein 0.5s, fadeout 0.5s 2.5s; }
        @keyframes fadein { from {bottom: 0; opacity: 0;} to {bottom: 80px; opacity: 1;} }
        @keyframes fadeout { from {bottom: 80px; opacity: 1;} to {bottom: 0; opacity: 0;} }
        .page { display: none; height: 100%; width: 100%; flex-direction: column; }
        .page.active { display: flex; }
    </style>
</head>
<body class="bg-gradient-to-r from-[#0f0c29] to-[#24243e] text-white">

    <div id="app-container" class="h-full w-full">
        <div id="main-page" class="page active p-4">
            <div class="flex justify-between items-center mb-6">
                <div class="flex items-center gap-2">
                    <img src="https://html4herosimages.vercel.app/User%20Avatar.png" width="40" class="rounded-full">
                    <span>Bota</span>
                </div>
                <div class="text-2xl font-bold text-yellow-400" id="score-val">$ 0</div>
            </div>

            <div class="flex-grow flex flex-col justify-center items-center relative" id="coin-area">
                <img src="https://html4herosimages.vercel.app/Main%20Coin%20Image.png" id="main-coin" class="w-64 h-64 cursor-pointer active:scale-95 transition-transform">
            </div>

            <div class="mt-auto space-y-4">
                <div class="flex justify-between text-sm mb-1">
                    <span>Energy</span>
                    <span id="energy-stat">500 / 500</span>
                </div>
                <div class="w-full bg-gray-700 h-3 rounded-full overflow-hidden">
                    <div id="energy-bar" class="bg-yellow-500 h-full transition-all" style="width: 100%"></div>
                </div>
                
                <div class="flex justify-around bg-slate-900 p-4 rounded-3xl">
                    <button onclick="showPage('main-page')">üè† Mine</button>
                    <button onclick="showPage('boost-page')">üöÄ Boost</button>
                    <button onclick="showPage('wallet-page')">üí∞ Wallet</button>
                </div>
            </div>
        </div>

        <div id="boost-page" class="page p-6">
            <h2 class="text-2xl font-bold mb-8 text-center">Boosters</h2>
            
            <button id="watch-ad-btn" class="w-full bg-gradient-to-r from-yellow-600 to-yellow-800 p-5 rounded-2xl flex justify-between items-center border border-yellow-400 shadow-lg mb-6">
                <div class="flex items-center gap-3">
                    <span class="text-2xl">üì∫</span>
                    <div class="text-left">
                        <p class="font-bold">Watch Video Ad</p>
                        <p class="text-xs">+5,000 Coins Reward</p>
                    </div>
                </div>
                <span class="bg-white text-black text-[10px] font-bold px-2 py-1 rounded">FREE</span>
            </button>

            <button onclick="showPage('main-page')" class="mt-auto bg-slate-800 py-3 rounded-xl">Back to Mine</button>
        </div>

        <div id="wallet-page" class="page p-6 items-center justify-center">
            <h2 class="text-2xl">Wallet Coming Soon</h2>
            <button onclick="showPage('main-page')" class="mt-4 bg-slate-800 px-6 py-2 rounded-full">Back</button>
        </div>
    </div>

    <div id="snackbar"></div>

    <script>
        let state = {
            coins: parseInt(localStorage.getItem('coins')) || 0,
            energy: 500,
            maxEnergy: 500
        };

        // Adsgram Initialization (Official Block ID: 22538)
        const AdController = window.Adsgram ? window.Adsgram.init({ blockId: "22538" }) : null;

        function updateUI() {
            document.getElementById('score-val').innerText = '$ ' + state.coins.toLocaleString();
            document.getElementById('energy-stat').innerText = `${Math.floor(state.energy)} / ${state.maxEnergy}`;
            document.getElementById('energy-bar').style.width = (state.energy / state.maxEnergy) * 100 + '%';
            localStorage.setItem('coins', state.coins);
        }

        // Tap Logic
        document.getElementById('main-coin').addEventListener('click', (e) => {
            if (state.energy >= 1) {
                state.coins += 1;
                state.energy -= 1;
                
                // Floating Animation
                const plusOne = document.createElement('div');
                plusOne.textContent = "+1";
                plusOne.className = 'score-display';
                plusOne.style.left = e.clientX + 'px';
                plusOne.style.top = e.clientY + 'px';
                document.body.appendChild(plusOne);
                setTimeout(() => plusOne.remove(), 800);

                updateUI();
            } else {
                showSnackbar("Not enough energy!");
            }
        });

        // Official Adsgram Ad Show Logic
        document.getElementById('watch-ad-btn').addEventListener('click', () => {
            if (!AdController) {
                showSnackbar("Ad provider not ready.");
                return;
            }

            showSnackbar("Loading Ad...");
            AdController.show().then((result) => {
                state.coins += 5000;
                updateUI();
                showSnackbar("Success! +5,000 Coins added.");
            }).catch((err) => {
                showSnackbar("Ad failed: " + (err.error || "No ads available"));
            });
        });

        function showPage(id) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function showSnackbar(msg) {
            const s = document.getElementById('snackbar');
            s.innerText = msg;
            s.classList.add('show');
            setTimeout(() => s.classList.remove('show'), 3000);
        }

        // Energy Refill
        setInterval(() => {
            if (state.energy < state.maxEnergy) {
                state.energy += 1;
                updateUI();
            }
        }, 1500);

        updateUI();
    </script>
</body>
</html>
